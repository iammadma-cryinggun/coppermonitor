services:
  - name: copper-monitor
    type: worker  # worker类型，适合后台任务
    runtime: python@3.10

    # 环境变量配置
    env:
      - key: TELEGRAM_BOT_TOKEN
        type: secret  # 在Zeabur控制台配置Secret
        description: Telegram Bot Token (从@BotFather获取)

      - key: TELEGRAM_CHAT_ID
        type: secret  # 在Zeabur控制台配置Secret
        description: Telegram Chat ID (接收消息的聊天ID)

      - key: TZ
        value: Asia/Shanghai
        description: 时区设置

    # 构建配置
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt

    # 启动命令
    startCommand: python run_continuous.py

    # 定时任务（每4小时运行一次）
    # 如果Zeabur不支持cron，脚本会自动循环运行
    cron: "0 */4 * * *"

    # 资源限制（根据需要调整）
    resources:
      memory: 512Mi
      cpu: 0.5
